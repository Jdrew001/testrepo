<div class="chip-container" [ngClass]="className">
    <div class="label-text" *ngIf="field?.label">{{ field.label || 'GAU ID:' }}</div>
    
    <div class="chips-wrapper" [attr.disabled]="disabled ? true : null" #chipsWrapper>
      <div class="chips-content" #chipsContent>
        <!-- Chip items -->
        <div class="chip-item" *ngFor="let item of control.value">
          <span class="chip-text">{{ item }}</span>
          <button 
            type="button" 
            class="chip-remove" 
            (click)="removeItem(item)" 
            [disabled]="disabled">X</button>
        </div>
        
        <!-- Input field -->
        <input 
          type="text"
          class="chip-input"
          [placeholder]="field?.placeholder || ''"
          [(ngModel)]="inputValue"
          (keydown)="onKeyDown($event)"
          (keyup.enter)="onEnterKeyUp()"
          (focus)="onInputFocus()"
          (blur)="onInputBlur()"
          [disabled]="disabled"
          #chipInput>
        
        <!-- +1 dropdown button - only visible when overflow detected -->
        <button 
          *ngIf="isOverflowing"
          type="button"
          class="dropdown-toggle"
          (click)="toggleDropdown($event)"
          [disabled]="disabled">
          <span>+1</span>
          <span class="dropdown-arrow">â–¼</span>
        </button>
      </div>
      
      <!-- Dropdown menu -->
      <div class="dropdown-menu" *ngIf="isDropdownOpen">
        <div class="dropdown-item" 
             *ngFor="let option of dropdownItems"
             (click)="selectOption(option)">
          {{ option }}
        </div>
        <div class="dropdown-empty" *ngIf="!dropdownItems || !dropdownItems.length">
          No options available
        </div>
      </div>
    </div>
    
    <!-- Clear button outside -->
    <button 
      type="button" 
      class="clear-button" 
      (click)="clearAll()" 
      [disabled]="disabled || !control.value || !control.value.length">X</button>
    
    <!-- Overlay -->
    <div class="chip-overlay" *ngIf="showOverlay" (click)="closeOverlay()"></div>
  </div>